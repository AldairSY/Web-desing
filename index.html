<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sistema de Evaluaci√≥n de Proyectos de Investigaci√≥n e Innovaci√≥n - Universidad Peruana Los Andes">
    <meta name="theme-color" content="#00D9FF">
    <title>Sistema de Investigaci√≥n e Innovaci√≥n - UPLA</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- PANTALLA DE LOGIN -->
    <div id="loginPage" class="page active">
        <div class="login-container">
            <div class="logo-container">
                <img src="logo-upla.png" alt="Logo Universidad Peruana Los Andes" class="logo">
                <h1>Sistema de Investigaci√≥n e Innovaci√≥n</h1>
            </div>
            <form id="loginForm" class="login-form" aria-labelledby="login-heading">
                <h2 id="login-heading" class="sr-only">Formulario de inicio de sesi√≥n</h2>
                <div class="form-group">
                    <label for="email">Correo Institucional</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email"
                        placeholder="usuario@upla.edu.pe" 
                        required
                        autocomplete="email"
                        aria-required="true"
                        aria-describedby="email-help">
                    <span id="email-help" class="sr-only">Ingrese su correo institucional de UPLA</span>
                </div>
                <div class="form-group">
                    <label for="password">Contrase√±a</label>
                    <input 
                        type="password" 
                        id="password" 
                        name="password"
                        placeholder="Ingrese su contrase√±a" 
                        required
                        autocomplete="current-password"
                        aria-required="true">
                </div>
                <button type="submit" class="btn-primary">Iniciar Sesi√≥n</button>
                <div id="loginError" class="error-message" role="alert" aria-live="polite"></div>
            </form>
        </div>
    </div>

    <!-- DASHBOARD PRINCIPAL -->
    <div id="dashboardPage" class="page">
        <nav class="navbar" role="navigation" aria-label="Navegaci√≥n principal">
            <div class="nav-brand">
                <img src="logo-upla.png" alt="Logo UPLA" class="nav-logo">
                <h2>Investigaci√≥n e Innovaci√≥n</h2>
            </div>
            <div class="nav-user">
                <span id="userName" aria-label="Usuario actual"></span>
                <button onclick="logout()" class="btn-secondary" aria-label="Cerrar sesi√≥n">Cerrar Sesi√≥n</button>
            </div>
        </nav>

        <main class="dashboard-container">
            <h1 class="page-title">Categor√≠as de Innovaci√≥n</h1>
            <div class="categories-grid" role="list">
                <div class="category-card" 
                     onclick="openCategory('tecnologica')" 
                     role="listitem" 
                     tabindex="0"
                     onkeypress="if(event.key==='Enter')openCategory('tecnologica')"
                     data-tooltip="Explora proyectos de desarrollo tecnol√≥gico">
                    <div class="category-icon" aria-hidden="true">üíª</div>
                    <h3>Innovaci√≥n Tecnol√≥gica</h3>
                    <p>Proyectos de desarrollo tecnol√≥gico y software</p>
                    <button class="btn-category" aria-label="Ver proyectos de innovaci√≥n tecnol√≥gica">Ver Proyectos</button>
                </div>
                <div class="category-card" 
                     onclick="openCategory('aplicada')" 
                     role="listitem" 
                     tabindex="0"
                     onkeypress="if(event.key==='Enter')openCategory('aplicada')"
                     data-tooltip="Explora proyectos de investigaci√≥n aplicada">
                    <div class="category-icon" aria-hidden="true">üî¨</div>
                    <h3>Innovaci√≥n Aplicada</h3>
                    <p>Proyectos de investigaci√≥n aplicada</p>
                    <button class="btn-category" aria-label="Ver proyectos de innovaci√≥n aplicada">Ver Proyectos</button>
                </div>
                <div class="category-card" 
                     onclick="openCategory('pedagogica')" 
                     role="listitem" 
                     tabindex="0"
                     onkeypress="if(event.key==='Enter')openCategory('pedagogica')"
                     data-tooltip="Explora proyectos de mejora educativa">
                    <div class="category-icon" aria-hidden="true">üìö</div>
                    <h3>Innovaci√≥n Pedag√≥gica</h3>
                    <p>Proyectos de mejora educativa</p>
                    <button class="btn-category" aria-label="Ver proyectos de innovaci√≥n pedag√≥gica">Ver Proyectos</button>
                </div>
            </div>
        </main>
    </div>

    <!-- P√ÅGINA DE CATEGOR√çA CON FILTROS -->
    <div id="categoryPage" class="page">
        <nav class="navbar" role="navigation" aria-label="Navegaci√≥n de categor√≠a">
            <div class="nav-brand">
                <img src="logo-upla.png" alt="Logo UPLA" class="nav-logo">
                <h2>Investigaci√≥n e Innovaci√≥n</h2>
            </div>
            <div class="nav-user">
                <button onclick="showDashboard()" class="btn-secondary">‚Üê Volver</button>
                <button onclick="logout()" class="btn-secondary">Cerrar Sesi√≥n</button>
            </div>
        </nav>

        <main class="category-container">
            <div class="category-header">
                <h1 id="categoryTitle"></h1>
                <button onclick="showNewProjectForm()" class="btn-primary" aria-label="Agregar nuevo proyecto">
                    ‚ú® Agregar Nuevo Proyecto
                </button>
            </div>

            <!-- FILTROS DE B√öSQUEDA -->
            <section class="filters-container" aria-label="Filtros de b√∫squeda">
                <div class="filters-title">
                    <h3>üîç Filtrar Proyectos</h3>
                    <button onclick="clearFilters()" class="btn-clear" aria-label="Limpiar todos los filtros">Limpiar Filtros</button>
                </div>
                <div class="filters-grid">
                    <div class="filter-item">
                        <label for="filterName">Buscar por nombre</label>
                        <input 
                            type="text" 
                            id="filterName" 
                            placeholder="Nombre del proyecto..." 
                            oninput="applyFilters()"
                            aria-label="Filtrar por nombre del proyecto">
                    </div>
                    <div class="filter-item">
                        <label for="filterType">Tipo de proyecto</label>
                        <select id="filterType" onchange="applyFilters()" aria-label="Filtrar por tipo de proyecto">
                            <option value="">Todos</option>
                            <option value="basica">Investigaci√≥n B√°sica</option>
                            <option value="aplicada">Investigaci√≥n Aplicada</option>
                            <option value="desarrollo">Desarrollo Tecnol√≥gico</option>
                            <option value="innovacion">Innovaci√≥n</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label for="filterResearcher">Investigador</label>
                        <input 
                            type="text" 
                            id="filterResearcher" 
                            placeholder="Nombre del investigador..." 
                            oninput="applyFilters()"
                            aria-label="Filtrar por investigador">
                    </div>
                    <div class="filter-item">
                        <label for="filterProgram">Programa</label>
                        <input 
                            type="text" 
                            id="filterProgram" 
                            placeholder="Programa de estudio..." 
                            oninput="applyFilters()"
                            aria-label="Filtrar por programa de estudio">
                    </div>
                </div>
                <div class="filter-results">
                    <span id="filterCount" role="status" aria-live="polite">0 proyectos encontrados</span>
                </div>
            </section>

            <div id="projectsList" class="projects-list" role="list" aria-label="Lista de proyectos"></div>
        </main>
    </div>

    <!-- FORMULARIO NUEVO PROYECTO -->
    <div id="newProjectPage" class="page">
        <nav class="navbar" role="navigation">
            <div class="nav-brand">
                <img src="logo-upla.png" alt="Logo UPLA" class="nav-logo">
                <h2>Nuevo Proyecto</h2>
            </div>
            <div class="nav-user">
                <button onclick="backToCategory()" class="btn-secondary">‚Üê Volver</button>
            </div>
        </nav>

        <main class="form-container">
            <h1>‚ú® Agregar Nuevo Proyecto de Innovaci√≥n</h1>
            <form id="newProjectForm" class="project-form" aria-labelledby="new-project-title">
                <h2 id="new-project-title" class="sr-only">Formulario de nuevo proyecto de investigaci√≥n</h2>
                
                <div class="form-group">
                    <label for="projectName">Nombre del Proyecto *</label>
                    <input 
                        type="text" 
                        id="projectName" 
                        name="projectName"
                        required
                        aria-required="true"
                        minlength="10"
                        maxlength="200"
                        placeholder="T√≠tulo completo del proyecto">
                </div>

                <div class="form-group">
                    <label for="projectType">Tipo de Proyecto *</label>
                    <select id="projectType" name="projectType" required aria-required="true">
                        <option value="">Seleccione...</option>
                        <option value="basica">Investigaci√≥n B√°sica</option>
                        <option value="aplicada">Investigaci√≥n Aplicada</option>
                        <option value="desarrollo">Desarrollo Tecnol√≥gico</option>
                        <option value="innovacion">Innovaci√≥n</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="researchers">Investigadores *</label>
                    <textarea 
                        id="researchers" 
                        name="researchers"
                        rows="3" 
                        placeholder="Nombre completo de los investigadores (separados por coma)" 
                        required
                        aria-required="true"
                        minlength="5"></textarea>
                </div>

                <div class="form-group">
                    <label for="studyProgram">Programa de Estudio *</label>
                    <input 
                        type="text" 
                        id="studyProgram" 
                        name="studyProgram"
                        placeholder="Ej: Ingenier√≠a de Sistemas" 
                        required
                        aria-required="true">
                </div>

                <div class="form-group">
                    <label for="researchLine">L√≠nea de Investigaci√≥n *</label>
                    <input 
                        type="text" 
                        id="researchLine" 
                        name="researchLine"
                        placeholder="L√≠nea de investigaci√≥n del proyecto"
                        required
                        aria-required="true">
                </div>

                <div class="form-group">
                    <label for="contactEmail">Correo de Contacto *</label>
                    <input 
                        type="email" 
                        id="contactEmail" 
                        name="contactEmail"
                        placeholder="correo@upla.edu.pe" 
                        required
                        aria-required="true"
                        pattern="[a-z0-9._%+-]+@upla\.edu\.pe$">
                </div>

                <div class="form-group">
                    <label for="generalInfo">Informaci√≥n General del Proyecto *</label>
                    <textarea 
                        id="generalInfo" 
                        name="generalInfo"
                        rows="5" 
                        placeholder="Descripci√≥n general del proyecto" 
                        required
                        aria-required="true"
                        minlength="50"
                        maxlength="1000"></textarea>
                </div>

                <div class="form-group">
                    <label for="problemDescription">Identificaci√≥n de la Problem√°tica *</label>
                    <textarea 
                        id="problemDescription" 
                        name="problemDescription"
                        rows="4" 
                        placeholder="Describa el problema que aborda el proyecto..."
                        required
                        aria-required="true"
                        minlength="50"></textarea>
                </div>

                <div class="form-group">
                    <label for="theoreticalFramework">Marco Te√≥rico *</label>
                    <textarea 
                        id="theoreticalFramework" 
                        name="theoreticalFramework"
                        rows="4" 
                        placeholder="Base te√≥rica y conceptual del proyecto..."
                        required
                        aria-required="true"
                        minlength="50"></textarea>
                </div>

                <div class="form-group">
                    <label for="projectSummary">Resumen del Proyecto *</label>
                    <textarea 
                        id="projectSummary" 
                        name="projectSummary"
                        rows="3" 
                        placeholder="Resumen ejecutivo del proyecto..."
                        required
                        aria-required="true"
                        minlength="50"
                        maxlength="500"></textarea>
                </div>

                <div class="form-group">
                    <label for="projectFile">Documento del Proyecto (PDF)</label>
                    <div class="file-upload-area" 
                         id="fileUploadArea"
                         ondrop="handleFileDrop(event)" 
                         ondragover="handleDragOver(event)"
                         ondragleave="handleDragLeave(event)"
                         role="button"
                         tabindex="0"
                         aria-label="√Årea de carga de archivos PDF">
                        <input 
                            type="file" 
                            id="projectFile" 
                            name="projectFile"
                            accept=".pdf" 
                            class="file-input"
                            onchange="handleFileSelect(event)"
                            aria-describedby="file-help">
                        <div class="file-upload-label">
                            <span class="file-icon" aria-hidden="true">üìÑ</span>
                            <span id="fileName">Selecciona un archivo PDF o arrastra aqu√≠</span>
                        </div>
                    </div>
                    <small id="file-help" style="color: #666;">Opcional: Adjunta el documento completo del proyecto en formato PDF</small>
                </div>

                <div id="uploadProgress" style="display: none;" class="upload-progress" role="status" aria-live="polite">
                    <div class="progress-bar">
                        <div id="progressBarFill" class="progress-fill"></div>
                    </div>
                    <span id="progressText">Subiendo archivo...</span>
                </div>

                <div class="form-actions">
                    <button type="button" onclick="backToCategory()" class="btn-secondary">Cancelar</button>
                    <button type="submit" class="btn-primary" id="submitBtn">üíæ Guardar Proyecto</button>
                </div>
            </form>
        </main>
    </div>

    <!-- P√ÅGINA DE EVALUACI√ìN -->
    <div id="evaluationPage" class="page">
        <nav class="navbar" role="navigation">
            <div class="nav-brand">
                <img src="logo-upla.png" alt="Logo UPLA" class="nav-logo">
                <h2>Evaluaci√≥n de Proyecto</h2>
            </div>
            <div class="nav-user">
                <button onclick="backToCategory()" class="btn-secondary">‚Üê Volver</button>
            </div>
        </nav>

        <main class="evaluation-container">
            <div class="eval-header">
                <h1 id="evalProjectTitle">Evaluaci√≥n de Proyecto</h1>
                <div class="total-score-badge" role="status" aria-live="polite">
                    <span>PUNTUACI√ìN TOTAL</span>
                    <div class="score-display" id="totalScoreDisplay">0</div>
                    <div class="score-max">/ 100 PUNTOS</div>
                </div>
            </div>
            
            <section class="project-info-card">
                <h3>üìã Informaci√≥n del Proyecto</h3>
                <div id="projectInfoDisplay" role="region" aria-label="Informaci√≥n del proyecto"></div>
            </section>

            <div class="evaluation-form-container">
                <h2>Sistema de Evaluaci√≥n de Proyectos de Innovaci√≥n</h2>
                <p class="eval-subtitle">Complete todas las secciones con sus respectivas calificaciones y observaciones</p>
                
                <form id="evaluationForm" class="evaluation-form" aria-labelledby="eval-form-title">
                    <h3 id="eval-form-title" class="sr-only">Formulario de evaluaci√≥n de proyecto</h3>
                    
                    <!-- SECCI√ìN 1 -->
                    <section class="eval-section" role="region" aria-labelledby="section1-title">
                        <div class="section-header">
                            <h3 id="section1-title">üìù 1. Datos Generales y Presentaci√≥n</h3>
                            <span class="section-points" aria-label="M√°ximo 15 puntos">(0-15 puntos)</span>
                        </div>
                        
                        <div class="eval-criteria">
                            <div class="criteria-item">
                                <label for="eval1_1">1.1 T√≠tulo del proyecto</label>
                                <p class="criteria-desc">Claridad, precisi√≥n y relevancia del t√≠tulo</p>
                                <input 
                                    type="number" 
                                    id="eval1_1" 
                                    name="eval1_1"
                                    min="0" 
                                    max="3" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para t√≠tulo del proyecto"
                                    aria-describedby="eval1_1-max">
                                <span class="max-points" id="eval1_1-max">/ 3 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval1_2">1.2 Datos de los investigadores</label>
                                <p class="criteria-desc">Completitud y pertinencia de la informaci√≥n</p>
                                <input 
                                    type="number" 
                                    id="eval1_2" 
                                    name="eval1_2"
                                    min="0" 
                                    max="3" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para datos de investigadores"
                                    aria-describedby="eval1_2-max">
                                <span class="max-points" id="eval1_2-max">/ 3 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval1_3">1.3 L√≠nea de investigaci√≥n</label>
                                <p class="criteria-desc">Coherencia con el programa y √°rea de estudio</p>
                                <input 
                                    type="number" 
                                    id="eval1_3" 
                                    name="eval1_3"
                                    min="0" 
                                    max="3" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para l√≠nea de investigaci√≥n"
                                    aria-describedby="eval1_3-max">
                                <span class="max-points" id="eval1_3-max">/ 3 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval1_4">1.4 Presentaci√≥n y formato</label>
                                <p class="criteria-desc">Organizaci√≥n, ortograf√≠a y estructura del documento</p>
                                <input 
                                    type="number" 
                                    id="eval1_4" 
                                    name="eval1_4"
                                    min="0" 
                                    max="3" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para presentaci√≥n y formato"
                                    aria-describedby="eval1_4-max">
                                <span class="max-points" id="eval1_4-max">/ 3 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval1_5">1.5 Documentaci√≥n adjunta</label>
                                <p class="criteria-desc">Calidad y completitud de archivos complementarios</p>
                                <input 
                                    type="number" 
                                    id="eval1_5" 
                                    name="eval1_5"
                                    min="0" 
                                    max="3" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para documentaci√≥n adjunta"
                                    aria-describedby="eval1_5-max">
                                <span class="max-points" id="eval1_5-max">/ 3 pts</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="obs1">Observaciones Generales</label>
                            <textarea 
                                id="obs1" 
                                name="obs1"
                                rows="3" 
                                placeholder="Comentarios sobre datos generales y presentaci√≥n..."
                                aria-label="Observaciones sobre datos generales"></textarea>
                        </div>
                        <div class="section-total" role="status" aria-live="polite">
                            Subtotal Secci√≥n 1: <span id="subtotal1">0</span> / 15
                        </div>
                    </section>

                    <!-- SECCI√ìN 2 -->
                    <section class="eval-section" role="region" aria-labelledby="section2-title">
                        <div class="section-header">
                            <h3 id="section2-title">üéØ 2. Resumen Ejecutivo</h3>
                            <span class="section-points" aria-label="M√°ximo 15 puntos">(0-15 puntos)</span>
                        </div>
                        
                        <div class="eval-criteria">
                            <div class="criteria-item">
                                <label for="eval2_1">2.1 Claridad del resumen</label>
                                <p class="criteria-desc">S√≠ntesis clara y comprensible del proyecto</p>
                                <input 
                                    type="number" 
                                    id="eval2_1" 
                                    name="eval2_1"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para claridad del resumen"
                                    aria-describedby="eval2_1-max">
                                <span class="max-points" id="eval2_1-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval2_2">2.2 Objetivos del proyecto</label>
                                <p class="criteria-desc">Definici√≥n precisa de objetivos generales y espec√≠ficos</p>
                                <input 
                                    type="number" 
                                    id="eval2_2" 
                                    name="eval2_2"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para objetivos del proyecto"
                                    aria-describedby="eval2_2-max">
                                <span class="max-points" id="eval2_2-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval2_3">2.3 Alcance del proyecto</label>
                                <p class="criteria-desc">Delimitaci√≥n clara del alcance y limitaciones</p>
                                <input 
                                    type="number" 
                                    id="eval2_3" 
                                    name="eval2_3"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para alcance del proyecto"
                                    aria-describedby="eval2_3-max">
                                <span class="max-points" id="eval2_3-max">/ 5 pts</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="obs2">Observaciones sobre el Resumen</label>
                            <textarea 
                                id="obs2" 
                                name="obs2"
                                rows="3" 
                                placeholder="Comentarios sobre el resumen ejecutivo..."
                                aria-label="Observaciones sobre el resumen"></textarea>
                        </div>
                        <div class="section-total" role="status" aria-live="polite">
                            Subtotal Secci√≥n 2: <span id="subtotal2">0</span> / 15
                        </div>
                    </section>

                    <!-- SECCI√ìN 3 -->
                    <section class="eval-section" role="region" aria-labelledby="section3-title">
                        <div class="section-header">
                            <h3 id="section3-title">üîç 3. Identificaci√≥n de la Problem√°tica</h3>
                            <span class="section-points" aria-label="M√°ximo 20 puntos">(0-20 puntos)</span>
                        </div>
                        
                        <div class="eval-criteria">
                            <div class="criteria-item">
                                <label for="eval3_1">3.1 Planteamiento del problema</label>
                                <p class="criteria-desc">Claridad en la definici√≥n y contextualizaci√≥n del problema</p>
                                <input 
                                    type="number" 
                                    id="eval3_1" 
                                    name="eval3_1"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para planteamiento del problema"
                                    aria-describedby="eval3_1-max">
                                <span class="max-points" id="eval3_1-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval3_2">3.2 Justificaci√≥n</label>
                                <p class="criteria-desc">Relevancia e importancia del problema a resolver</p>
                                <input 
                                    type="number" 
                                    id="eval3_2" 
                                    name="eval3_2"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para justificaci√≥n"
                                    aria-describedby="eval3_2-max">
                                <span class="max-points" id="eval3_2-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval3_3">3.3 An√°lisis de causas</label>
                                <p class="criteria-desc">Identificaci√≥n de factores y variables del problema</p>
                                <input 
                                    type="number" 
                                    id="eval3_3" 
                                    name="eval3_3"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para an√°lisis de causas"
                                    aria-describedby="eval3_3-max">
                                <span class="max-points" id="eval3_3-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval3_4">3.4 Impacto esperado</label>
                                <p class="criteria-desc">Beneficios y alcance de la soluci√≥n propuesta</p>
                                <input 
                                    type="number" 
                                    id="eval3_4" 
                                    name="eval3_4"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para impacto esperado"
                                    aria-describedby="eval3_4-max">
                                <span class="max-points" id="eval3_4-max">/ 5 pts</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="obs3">Observaciones sobre la Problem√°tica</label>
                            <textarea 
                                id="obs3" 
                                name="obs3"
                                rows="3" 
                                placeholder="Comentarios sobre la identificaci√≥n del problema..."
                                aria-label="Observaciones sobre la problem√°tica"></textarea>
                        </div>
                        <div class="section-total" role="status" aria-live="polite">
                            Subtotal Secci√≥n 3: <span id="subtotal3">0</span> / 20
                        </div>
                    </section>

                    <!-- SECCI√ìN 4 -->
                    <section class="eval-section" role="region" aria-labelledby="section4-title">
                        <div class="section-header">
                            <h3 id="section4-title">üìö 4. Marco Te√≥rico y Conceptual</h3>
                            <span class="section-points" aria-label="M√°ximo 20 puntos">(0-20 puntos)</span>
                        </div>
                        
                        <div class="eval-criteria">
                            <div class="criteria-item">
                                <label for="eval4_1">4.1 Antecedentes</label>
                                <p class="criteria-desc">Revisi√≥n de investigaciones y proyectos previos</p>
                                <input 
                                    type="number" 
                                    id="eval4_1" 
                                    name="eval4_1"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para antecedentes"
                                    aria-describedby="eval4_1-max">
                                <span class="max-points" id="eval4_1-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval4_2">4.2 Bases te√≥ricas</label>
                                <p class="criteria-desc">Fundamentos te√≥ricos y conceptuales s√≥lidos</p>
                                <input 
                                    type="number" 
                                    id="eval4_2" 
                                    name="eval4_2"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para bases te√≥ricas"
                                    aria-describedby="eval4_2-max">
                                <span class="max-points" id="eval4_2-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval4_3">4.3 Estado del arte</label>
                                <p class="criteria-desc">Conocimiento actual sobre el tema de investigaci√≥n</p>
                                <input 
                                    type="number" 
                                    id="eval4_3" 
                                    name="eval4_3"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para estado del arte"
                                    aria-describedby="eval4_3-max">
                                <span class="max-points" id="eval4_3-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval4_4">4.4 Referencias bibliogr√°ficas</label>
                                <p class="criteria-desc">Calidad, actualidad y pertinencia de las fuentes</p>
                                <input 
                                    type="number" 
                                    id="eval4_4" 
                                    name="eval4_4"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para referencias bibliogr√°ficas"
                                    aria-describedby="eval4_4-max">
                                <span class="max-points" id="eval4_4-max">/ 5 pts</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="obs4">Observaciones sobre el Marco Te√≥rico</label>
                            <textarea 
                                id="obs4" 
                                name="obs4"
                                rows="3" 
                                placeholder="Comentarios sobre el marco te√≥rico y conceptual..."
                                aria-label="Observaciones sobre el marco te√≥rico"></textarea>
                        </div>
                        <div class="section-total" role="status" aria-live="polite">
                            Subtotal Secci√≥n 4: <span id="subtotal4">0</span> / 20
                        </div>
                    </section>

                    <!-- SECCI√ìN 5 -->
                    <section class="eval-section" role="region" aria-labelledby="section5-title">
                        <div class="section-header">
                            <h3 id="section5-title">‚öôÔ∏è 5. Metodolog√≠a y Desarrollo</h3>
                            <span class="section-points" aria-label="M√°ximo 20 puntos">(0-20 puntos)</span>
                        </div>
                        
                        <div class="eval-criteria">
                            <div class="criteria-item">
                                <label for="eval5_1">5.1 Dise√±o metodol√≥gico</label>
                                <p class="criteria-desc">Coherencia y adecuaci√≥n de la metodolog√≠a propuesta</p>
                                <input 
                                    type="number" 
                                    id="eval5_1" 
                                    name="eval5_1"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para dise√±o metodol√≥gico"
                                    aria-describedby="eval5_1-max">
                                <span class="max-points" id="eval5_1-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval5_2">5.2 T√©cnicas e instrumentos</label>
                                <p class="criteria-desc">Selecci√≥n apropiada de herramientas y t√©cnicas</p>
                                <input 
                                    type="number" 
                                    id="eval5_2" 
                                    name="eval5_2"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para t√©cnicas e instrumentos"
                                    aria-describedby="eval5_2-max">
                                <span class="max-points" id="eval5_2-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval5_3">5.3 Plan de trabajo</label>
                                <p class="criteria-desc">Cronograma y actividades bien definidas</p>
                                <input 
                                    type="number" 
                                    id="eval5_3" 
                                    name="eval5_3"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para plan de trabajo"
                                    aria-describedby="eval5_3-max">
                                <span class="max-points" id="eval5_3-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval5_4">5.4 Viabilidad</label>
                                <p class="criteria-desc">Factibilidad t√©cnica, econ√≥mica y temporal</p>
                                <input 
                                    type="number" 
                                    id="eval5_4" 
                                    name="eval5_4"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para viabilidad"
                                    aria-describedby="eval5_4-max">
                                <span class="max-points" id="eval5_4-max">/ 5 pts</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="obs5">Observaciones sobre la Metodolog√≠a</label>
                            <textarea 
                                id="obs5" 
                                name="obs5"
                                rows="3" 
                                placeholder="Comentarios sobre metodolog√≠a y plan de desarrollo..."
                                aria-label="Observaciones sobre la metodolog√≠a"></textarea>
                        </div>
                        <div class="section-total" role="status" aria-live="polite">
                            Subtotal Secci√≥n 5: <span id="subtotal5">0</span> / 20
                        </div>
                    </section>

                    <!-- SECCI√ìN 6 -->
                    <section class="eval-section" role="region" aria-labelledby="section6-title">
                        <div class="section-header">
                            <h3 id="section6-title">üí° 6. Innovaci√≥n y Originalidad</h3>
                            <span class="section-points" aria-label="M√°ximo 10 puntos">(0-10 puntos)</span>
                        </div>
                        
                        <div class="eval-criteria">
                            <div class="criteria-item">
                                <label for="eval6_1">6.1 Grado de innovaci√≥n</label>
                                <p class="criteria-desc">Aporte novedoso y diferenciador del proyecto</p>
                                <input 
                                    type="number" 
                                    id="eval6_1" 
                                    name="eval6_1"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para grado de innovaci√≥n"
                                    aria-describedby="eval6_1-max">
                                <span class="max-points" id="eval6_1-max">/ 5 pts</span>
                            </div>
                            
                            <div class="criteria-item">
                                <label for="eval6_2">6.2 Originalidad</label>
                                <p class="criteria-desc">Creatividad y enfoque √∫nico de la propuesta</p>
                                <input 
                                    type="number" 
                                    id="eval6_2" 
                                    name="eval6_2"
                                    min="0" 
                                    max="5" 
                                    step="0.5" 
                                    value="0"
                                    required
                                    oninput="calculateScore()"
                                    aria-label="Calificaci√≥n para originalidad"
                                    aria-describedby="eval6_2-max">
                                <span class="max-points" id="eval6_2-max">/ 5 pts</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="obs6">Observaciones sobre Innovaci√≥n</label>
                            <textarea 
                                id="obs6" 
                                name="obs6"
                                rows="3" 
                                placeholder="Comentarios sobre el car√°cter innovador del proyecto..."
                                aria-label="Observaciones sobre innovaci√≥n"></textarea>
                        </div>
                        <div class="section-total" role="status" aria-live="polite">
                            Subtotal Secci√≥n 6: <span id="subtotal6">0</span> / 10
                        </div>
                    </section>

                    <!-- CALIFICACI√ìN FINAL -->
                    <section class="final-score-section" role="region" aria-labelledby="final-score-title">
                        <h3 id="final-score-title">üìä Calificaci√≥n Final</h3>
                        <div class="score-breakdown">
                            <div class="score-row">
                                <span>Datos Generales y Presentaci√≥n:</span>
                                <span class="score-value" id="final1">0</span>
                            </div>
                            <div class="score-row">
                                <span>Resumen Ejecutivo:</span>
                                <span class="score-value" id="final2">0</span>
                            </div>
                            <div class="score-row">
                                <span>Identificaci√≥n de la Problem√°tica:</span>
                                <span class="score-value" id="final3">0</span>
                            </div>
                            <div class="score-row">
                                <span>Marco Te√≥rico y Conceptual:</span>
                                <span class="score-value" id="final4">0</span>
                            </div>
                            <div class="score-row">
                                <span>Metodolog√≠a y Desarrollo:</span>
                                <span class="score-value" id="final5">0</span>
                            </div>
                            <div class="score-row">
                                <span>Innovaci√≥n y Originalidad:</span>
                                <span class="score-value" id="final6">0</span>
                            </div>
                            <div class="score-row total-row">
                                <span>CALIFICACI√ìN TOTAL:</span>
                                <span class="score-value-final" id="finalTotal">0 / 100</span>
                            </div>
                        </div>
                        
                        <div class="evaluation-status" id="evaluationStatus" role="status" aria-live="polite"></div>
                    </section>

                    <div class="form-group">
                        <label for="finalRecommendations">Recomendaciones Finales</label>
                        <textarea 
                            id="finalRecommendations" 
                            name="finalRecommendations"
                            rows="4" 
                            placeholder="Sugerencias y recomendaciones generales para el proyecto..."
                            aria-label="Recomendaciones finales"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-primary">üíæ Guardar Evaluaci√≥n</button>
                        <button type="button" onclick="exportPDF()" class="btn-export">üìÑ Exportar a PDF</button>
                        <button type="button" onclick="downloadLocal()" class="btn-export">üíæ Descargar JSON</button>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="supabaseClient.js"></script>
    <script src="app.js"></script>
</body>
</html>


